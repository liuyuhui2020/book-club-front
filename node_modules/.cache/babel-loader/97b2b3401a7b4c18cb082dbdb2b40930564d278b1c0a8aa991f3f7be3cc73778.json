{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function EventDetail(){const{id}=useParams();const[event,setEvent]=useState(null);const[qr,setQr]=useState(\"\");useEffect(()=>{fetch(\"https://book-club-backend-97no.onrender.com/api/events/\".concat(id)).then(res=>res.json()).then(data=>setEvent(data));},[id]);const handleRegister=()=>{const name=prompt(\"请输入姓名\");const phone=prompt(\"请输入手机号\");fetch(\"https://book-club-backend-97no.onrender.com/api/events/\".concat(id,\"/register\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name,phone})}).then(res=>res.json()).then(data=>setQr(data.qr_url));};if(!event)return/*#__PURE__*/_jsx(\"div\",{children:\"\\u52A0\\u8F7D\\u4E2D...\"});return/*#__PURE__*/_jsxs(\"div\",{style:{padding:20},children:[/*#__PURE__*/_jsx(\"img\",{src:event.image,style:{width:\"100%\",maxWidth:500},alt:\"event\"}),/*#__PURE__*/_jsx(\"h2\",{children:event.name}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u521B\\u5EFA\\u4EBA\\uFF1A\",event.creator]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u65F6\\u95F4\\uFF1A\",new Date(event.start_time).toLocaleString()]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u4EBA\\u6570\\uFF1A\",event.current_participants,\" / \",event.max_participants]}),/*#__PURE__*/_jsx(\"p\",{children:event.description}),/*#__PURE__*/_jsx(\"p\",{children:event.recommendation}),/*#__PURE__*/_jsx(\"p\",{children:event.type}),qr?/*#__PURE__*/_jsx(\"img\",{src:qr,alt:\"\\u4E8C\\u7EF4\\u7801\",style:{marginTop:20}}):/*#__PURE__*/_jsx(\"button\",{onClick:handleRegister,style:{marginTop:20},children:\"\\u62A5\\u540D\"})]});}export default EventDetail;","map":{"version":3,"names":["React","useEffect","useState","useParams","jsx","_jsx","jsxs","_jsxs","EventDetail","id","event","setEvent","qr","setQr","fetch","concat","then","res","json","data","handleRegister","name","prompt","phone","method","headers","body","JSON","stringify","qr_url","children","style","padding","src","image","width","maxWidth","alt","creator","Date","start_time","toLocaleString","current_participants","max_participants","description","recommendation","type","marginTop","onClick"],"sources":["/Users/liuyuhui/Study/LLM/Python/workspace/book-club/frontend/src/components/EventDetail.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nfunction EventDetail() {\n  const { id } = useParams();\n  const [event, setEvent] = useState(null);\n  const [qr, setQr] = useState(\"\");\n\n  useEffect(() => {\n    fetch(`https://book-club-backend-97no.onrender.com/api/events/${id}`)\n      .then(res => res.json())\n      .then(data => setEvent(data));\n  }, [id]);\n\n  const handleRegister = () => {\n    const name = prompt(\"请输入姓名\");\n    const phone = prompt(\"请输入手机号\");\n    fetch(`https://book-club-backend-97no.onrender.com/api/events/${id}/register`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ name, phone })\n    })\n    .then(res => res.json())\n    .then(data => setQr(data.qr_url));\n  };\n\n  if (!event) return <div>加载中...</div>;\n\n  return (\n    <div style={{ padding: 20 }}>\n      <img src={event.image} style={{ width: \"100%\", maxWidth: 500 }} alt=\"event\" />\n      <h2>{event.name}</h2>\n      <div>创建人：{event.creator}</div>\n      <div>时间：{new Date(event.start_time).toLocaleString()}</div>\n      <div>人数：{event.current_participants} / {event.max_participants}</div>\n      <p>{event.description}</p>\n      <p>{event.recommendation}</p>\n      <p>{event.type}</p>\n      {qr ? (\n        <img src={qr} alt=\"二维码\" style={{ marginTop: 20 }} />\n      ) : (\n        <button onClick={handleRegister} style={{ marginTop: 20 }}>报名</button>\n      )}\n    </div>\n  );\n}\nexport default EventDetail;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}